
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="../Mission%20du%2031.05/" rel="prev"/>
<link href="../../Rapport%20quotidien/Tableau%20rapport%20quotidien/" rel="next"/>
<link href="../../../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.4.3, mkdocs-material-9.1.15" name="generator"/>
<title>Mission Semaine 6/06 au 8/06 - Portfolio</title>
<link href="../../../assets/stylesheets/main.26e3688c.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.2/styles/default.min.css" rel="stylesheet"/>
<script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body dir="ltr">
<script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#mission-semaine-606-au-806">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--shadow" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="Portfolio" class="md-header__button md-logo" data-md-component="logo" href="../../.." title="Portfolio">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            Portfolio
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Mission Semaine 6/06 au 8/06
            
          </span>
</div>
</div>
</div>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Portfolio" class="md-nav__button md-logo" data-md-component="logo" href="../../.." title="Portfolio">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
    Portfolio
  </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../..">
        Bienvenue sur mon Porfolio
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          BTS SIO 
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
          BTS SIO 
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../BTS%20SIO%20/%20BTS%20SIO/">
         BTS SIO
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          CV 
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
          CV 
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../CV%20/Mon%20CV/">
        Mon CV
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          Contact
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
          Contact
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../Contact/Comment%20me%20contacter/">
        Comment me contacter
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
          Stage CD 72
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_5_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
          Stage CD 72
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../CD72/">
        PRESENTATION DE L’ORGANISME
      </a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_5_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
          Mission
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_5_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_2">
<span class="md-nav__icon md-icon"></span>
          Mission
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../Mission%20du%2023.05/">
        Mission du 23/05
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Mission%20du%2024.05/">
        Mission 24/05
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Mission%20du%2025.05/">
        Mission du 25/05
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Mission%20du%2026.05/">
        Mission du 26/05
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Mission%20du%2031.05/">
        Mission 31/05
      </a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
          Mission Semaine 6/06 au 8/06
          <span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
        Mission Semaine 6/06 au 8/06
      </a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#registry-docker-cest-quoi">
    Registry Docker c’est quoi ?
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#installation-srv-tst-docker">
    Installation SRV-TST-DOCKER :
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#installation-registry-docker">
    Installation Registry docker
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#visualiser-les-images-disponibles-dans-le-registry-prive">
    Visualiser les images disponibles dans le Registry privé:
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#visualiser-les-differents-tags-dune-image-dans-le-registry-prive">
    Visualiser les différents tags d'une image dans le Registry privé :
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#le-stockage-dans-un-registry-docker">
    Le stockage dans un Registry Docker :
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#le-chiffrement">
    Le chiffrement :
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#restriction-dacces">
    Restriction d'accès :
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
          Rapport quotidien
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_3">
<span class="md-nav__icon md-icon"></span>
          Rapport quotidien
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../Rapport%20quotidien/Tableau%20rapport%20quotidien/">
        Tableau rapport quotidien
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
          Veille techno
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
          Veille techno
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../Veille%20techno/Ma%20veille/">
        Une veille c'est quoi ?
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#registry-docker-cest-quoi">
    Registry Docker c’est quoi ?
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#installation-srv-tst-docker">
    Installation SRV-TST-DOCKER :
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#installation-registry-docker">
    Installation Registry docker
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#visualiser-les-images-disponibles-dans-le-registry-prive">
    Visualiser les images disponibles dans le Registry privé:
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#visualiser-les-differents-tags-dune-image-dans-le-registry-prive">
    Visualiser les différents tags d'une image dans le Registry privé :
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#le-stockage-dans-un-registry-docker">
    Le stockage dans un Registry Docker :
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#le-chiffrement">
    Le chiffrement :
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#restriction-dacces">
    Restriction d'accès :
  </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="mission-semaine-606-au-806">Mission Semaine 6/06 au 8/06</h1>
<h4 id="installation-srv-dock-et-registry-docker">Installation SRV-DOCK et Registry Docker</h4>
<h2 id="registry-docker-cest-quoi">Registry Docker c’est quoi ?</h2>
<p><strong><span style="color:red">Le registre Docker est une méthode standard de stockage et de distribution des images Docker. Le registre est un référentiel open source sous licence d'autorisation Apache. Le registre Docker permet également d'améliorer le contrôle d'accès et la sécurité des images Docker stockées dans son référentiel.</span></strong></p>
<h2 id="installation-srv-tst-docker">Installation SRV-TST-DOCKER :</h2>
<p>Pour installer le serveur, je l’ai fait sur l’outil de virtualisation VMWARE. L’installation c’est fait grâce à des scripts ansible ce qui permet une installation rapide et automatique. </p>
<h2 id="installation-registry-docker">Installation Registry docker</h2>
<p>Création du Registry privé :</p>
<pre><code class="language-bash">“docker run -d -p 5000:5000 --restart=always --name mon-registry registry:2”
</code></pre>
<h3 id="deposer-une-image-dans-le-registry-prive">Déposer une image dans le Registry privé :</h3>
<p>Tout d’abord il faudra créer un DockerFile :</p>
<p><img alt="code dockerfile" src="../../../images/Dockerfile.jpg"/></p>
<p>Ensuite il faudra construire votre image : </p>
<p><img alt="Création image" src="../../../images/cr%C3%A9ation_image.jpg"/></p>
<p>Ensuite, il faudra tag votre image pour pouvoir push l’image sur le registry docker </p>
<p><img alt="Tag image" src="../../../images/tag_image.jpg"/></p>
<p>Enfin vous pourrez push votre image dans votre registry :</p>
<p><img alt="Push image" src="../../../images/push_image.jpg"/></p>
<h2 id="visualiser-les-images-disponibles-dans-le-registry-prive">Visualiser les images disponibles dans le Registry privé:</h2>
<p>Voici l’url pour y accèder : </p>
<p><a href="http://srv-tst-dock.cg72.fr:5000/v2/_catalog">Lien pour acceder au registry</a></p>
<p>Voici ce que vous aurez comme résultat : </p>
<p><img alt="résultat page registry" src="../../../images/resultat_page_registry.jpg"/></p>
<h2 id="visualiser-les-differents-tags-dune-image-dans-le-registry-prive">Visualiser les différents tags d'une image dans le Registry privé :</h2>
<p>Pour l’exemple, nous allons rajouter un tag “test” à notre image “alpinegit” :</p>
<p><img alt="Ajouter un tag à une image" src="../../../images/tag_image_test.jpg"/></p>
<p>Voici la commande donc pour visualiser les tags :</p>
<p><a href="http://srv-tst-dock.cg72.fr:5000/v2/alpinegit/tags/list">Visualiser les tag</a></p>
<p>Voici le résultat : </p>
<p><img alt="Résultat page tag" src="../../../images/resultat_page_tags.jpg"/></p>
<h2 id="le-stockage-dans-un-registry-docker">Le stockage dans un Registry Docker :</h2>
<p>C’est important d’avoir un stockage car le problème est que si vous quitter votre docker tous seront supprimer, c’est pour cela qui faut créer des volumes.</p>
<p>Tout d’abord, il faudra créer un dossier : </p>
<p><img alt="Dossier stockage" src="../../../images/stock.jpg"/></p>
<p>Ensuite lancer un docker avec le paramètre qui sera pris en compte :</p>
<p><img alt="Docker Stockage" src="../../../images/docker_stock.jpg"/></p>
<h3 id="attention"><span style="color:red">Attention</span></h3>
<p><strong>Pensez à supprimer votre précèdent docker</strong></p>
<h2 id="le-chiffrement">Le chiffrement :</h2>
<p>Tout d’abord, il faudra créer un dossier pour stocker vos certificats :</p>
<p><img alt="Dossier Certificat" src="../../../images/docker_certificat.jpg"/></p>
<p>Ensuite, il faudra générer vos certificats auto-signée avec l’outil openssl :</p>
<p><img alt="openssl" src="../../../images/openssl.jpg"/></p>
<p>Ensuite créer un docker avec ces paramètres : </p>
<p><img alt="Docker certif" src="../../../images/docker_certif.jpg"/></p>
<p>Et vous pourrais refaire la manip du début c’est-à-dire tag et push vos images.</p>
<p>Pour accéder à la page pour voir quoi contient votre registry : <a href="https://srv-tst-dock.cg72.fr/v2/_catalog">Lien pour voir ce que contient le registry</a></p>
<h2 id="restriction-dacces">Restriction d'accès :</h2>
<p>Il faudra tout d’abord, créer un dossier pour stocker vos fichiers :</p>
<p>Ensuite il faudra générer le fichier htpasswd : </p>
<p>Ensuite vous pourrez recréer un docker avec tous les paramètres vus depuis le début</p>
<p>Ensuite vous vous connectez à votre registry avec cette commande : </p>
<p>Une fois que vous êtes log vous pouvez push vos images :</p>
<p>Docker Compose :</p>
<p>Normalement, si vous avez tout bien fait vous devriez avoir cette arborescence :</p>
<p>Vous pouvez inscrire toutes ces fonctionnalités dans un docker Compose : </p>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../../..", "features": [], "search": "../../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
<script src="../../../assets/javascripts/bundle.b4d07000.min.js"></script>
<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.2/highlight.min.js"></script>
<script src="../../../javascripts/config.js"></script>
</body>
</html>